{% extends "base.html" %}

{% block content %}
	<table class="table table-striped">
		<thead>
			<tr><th><h1>User: {{ user.username }}</h1></th></tr>
		</thead>
		<tbody>
			<tr><td>Tasks assigned: {{ user.tasks.count() }}</tr>
			<tr><td>Tasks in progress: {{ user.tasks.filter_by(status='In progress').count() }}</td></tr>
			<tr><td>Tasks completed: {{ user.tasks.filter_by(status='Completed').count() }}</td></tr>
		</tbody>
	</table>
	<hr>
	{% if tasks %}
	<h2>Tasks assigned to {{ user.username }}:</h2>
	<table class="table table-striped">
		<thead>
			<tr>
				<th scope="col">ID</th>
				<th scope="col">Title</th>
				<th scope="col">Status</th>
				<th scope="col">Executor</th>
				<th scope="col">Creation date</th>
				<th scope="col"></th>
			</tr>
		</thead>
		<tbody>
		{% for task in tasks %}
			<tr>
				<td>{{ task.id }}</td>
				<td><a href="{{ url_for('task', task_id=task.id ) }}">
						{{ task.title }}
					</a>
				</td>
				<td>{{ task.status }}</td>
				<td>{{ task.executor.username }}</td>
				<td>{{ task.created_at.strftime("%Y.%m.%d %H:%M") }}</td>
				<td><a href="{{ url_for('edit_task', task_id=task.id ) }}">
						Edit
					</a>
				</td>
			</tr>
		{% endfor %}
		</tbody>
	</table>
	{% endif %}

{% endblock %}
